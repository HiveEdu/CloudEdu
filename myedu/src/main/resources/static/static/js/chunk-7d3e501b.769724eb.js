(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d3e501b"],{"0620":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"800px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"砍价标题",prop:"title"}},[r("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入砍价标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"库存",prop:"stock"}},[r("el-input-number",{attrs:{placeholder:"请输入库存"},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",t)},expression:"form.stock"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"单位名称",prop:"unitName"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入单位名称"},model:{value:e.form.unitName,callback:function(t){e.$set(e.form,"unitName",t)},expression:"form.unitName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"销量必填",prop:"sales"}},[r("el-input-number",{attrs:{placeholder:"请输入销量必填"},model:{value:e.form.sales,callback:function(t){e.$set(e.form,"sales",t)},expression:"form.sales"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否推荐",prop:"isHot"}},[r("el-radio-group",{model:{value:e.form.isHot,callback:function(t){e.$set(e.form,"isHot",t)},expression:"form.isHot"}},e._l(e.isRecommendOptions,(function(t){return r("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"开启时间",prop:"startTime"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择砍价开启时间"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"结束时间",prop:"stopTime"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:"",size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择砍价结束时间"},model:{value:e.form.stopTime,callback:function(t){e.$set(e.form,"stopTime",t)},expression:"form.stopTime"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"砍价名称",prop:"storeName"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入砍价产品名称"},model:{value:e.form.storeName,callback:function(t){e.$set(e.form,"storeName",t)},expression:"form.storeName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"砍价金额",prop:"price"}},[r("el-input-number",{attrs:{placeholder:"请输入砍价金额"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"砍价商品最低价",prop:"minPrice"}},[r("el-input-number",{attrs:{placeholder:"请输入砍价商品最低价"},model:{value:e.form.minPrice,callback:function(t){e.$set(e.form,"minPrice",t)},expression:"form.minPrice"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"每次购买的砍价产品数量",prop:"num"}},[r("el-input-number",{attrs:{placeholder:"请输入每次购买的砍价产品数量"},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户每次砍价的最大金额",prop:"bargainMaxPrice"}},[r("el-input-number",{attrs:{placeholder:"请输入用户每次砍价的最大金额"},model:{value:e.form.bargainMaxPrice,callback:function(t){e.$set(e.form,"bargainMaxPrice",t)},expression:"form.bargainMaxPrice"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户每次砍价的最小金额",prop:"bargainMinPrice"}},[r("el-input-number",{attrs:{placeholder:"请输入用户每次砍价的最小金额"},model:{value:e.form.bargainMinPrice,callback:function(t){e.$set(e.form,"bargainMinPrice",t)},expression:"form.bargainMinPrice"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"用户每次砍价的次数",prop:"bargainNum"}},[r("el-input-number",{attrs:{placeholder:"请输入用户每次砍价的次数"},model:{value:e.form.bargainNum,callback:function(t){e.$set(e.form,"bargainNum",t)},expression:"form.bargainNum"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"返多少积分",prop:"giveIntegral"}},[r("el-input-number",{attrs:{placeholder:"请输入返多少积分"},model:{value:e.form.giveIntegral,callback:function(t){e.$set(e.form,"giveIntegral",t)},expression:"form.giveIntegral"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"砍价状态 "}},[r("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(t){return r("el-radio",{key:t.dictValue,attrs:{label:t.dictValue}},[e._v(e._s(t.dictLabel))])})),1)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"砍价活动简介",prop:"info"}},[r("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:"请输入砍价活动简介"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"成本价",prop:"cost"}},[r("el-input-number",{attrs:{placeholder:"请输入成本价"},model:{value:e.form.cost,callback:function(t){e.$set(e.form,"cost",t)},expression:"form.cost"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input-number",{attrs:{placeholder:"请输入排序"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"浏览量",prop:"look"}},[r("el-input-number",{attrs:{placeholder:"请输入砍价产品浏览量"},model:{value:e.form.look,callback:function(t){e.$set(e.form,"look",t)},expression:"form.look"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"分享量",prop:"share"}},[r("el-input-number",{attrs:{placeholder:"请输入砍价产品分享量"},model:{value:e.form.share,callback:function(t){e.$set(e.form,"share",t)},expression:"form.share"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"砍价规则",prop:"rule"}},[r("el-upload",{staticClass:"avatar-uploader quill-img",attrs:{action:e.uploadImgUrl,name:"file",headers:e.headers,"show-file-list":!1,"on-success":e.quillImgSuccess,"on-error":e.uploadError,"before-upload":e.quillImgBefore,accept:".jpg,.jpeg,.png,.gif"}}),e._v(" "),r("quill-editor",{ref:"quillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.form.rule,callback:function(t){e.$set(e.form,"rule",t)},expression:"form.rule"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"砍价详情",prop:"description"}},[r("el-upload",{staticClass:"avatar-uploader quill-img",attrs:{action:e.uploadImgUrl,name:"file",headers:e.headers,"show-file-list":!1,"on-success":e.quillImgSuccess,"on-error":e.uploadError,"before-upload":e.quillImgBefore,accept:".jpg,.jpeg,.png,.gif"}}),e._v(" "),r("quill-editor",{ref:"quillEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{blur:function(t){return e.onEditorBlur(t)},focus:function(t){return e.onEditorFocus(t)},change:function(t){return e.onEditorChange(t)}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),r("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)},a=[],l=r("bd86"),n=(r("7f7f"),r("c5f6"),r("3098")),i=r("cd6b"),s=r("953d"),c=r("f318"),u=r.n(c),m=r("9339"),f=r.n(m);r("a753"),r("8096"),r("14e1");f.a.register("modules/imageResize",u.a);var p={name:"bargainModal",props:{courseBargain:null,currentData:null,value:{type:String},maxSize:{type:Number,default:4e3}},components:{quillEditor:s["quillEditor"]},watch:{courseBargain:function(e){var t=this;this.dialogVisible=e,this.getDicts("course_type").then((function(e){t.classifyOptions=e.data})),this.getDicts("managed_type").then((function(e){t.reclassifyCollOptions=e.data})),this.getDicts("is-one-to-one").then((function(e){t.isOneToOneOptions=e.data})),this.getDicts("brgain_status").then((function(e){t.statusOptions=e.data})),this.getDicts("IsRecommend").then((function(e){t.isRecommendOptions=e.data}))},currentData:function(e){var t=this;Object(n["f"])(e.id).then((function(e){t.form.courseId=e.data.id,t.form.storeName=e.data.name,t.form.info=e.data.introduce,t.form.stock=e.data.classAll,t.form.price=e.data.courseCost}))}},data:function(){var e;return{title:"开始砍价",dialogVisible:!1,isRecommendOptions:[],stores:[],form:(e={stock:0,storeName:null,giveIntegral:0,sort:0,status:"1",bargainMinPrice:.1,price:0,minPrice:0,num:0,bargainMaxPrice:0},Object(l["a"])(e,"bargainMinPrice",0),Object(l["a"])(e,"bargainNum",0),Object(l["a"])(e,"cost",0),Object(l["a"])(e,"look",0),Object(l["a"])(e,"share",0),Object(l["a"])(e,"isHot","1"),Object(l["a"])(e,"unitName","节"),Object(l["a"])(e,"description",this.value),Object(l["a"])(e,"rule",this.value),e),rules:{}}},methods:{handleClose:function(){this.$emit("closeBargain",!1)},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){this.$emit("input",this.content)},quillImgBefore:function(e){var t=e.type;return"image/jpeg"===t||"image/png"===t||(this.$message.error("请插入图片类型文件(jpg/jpeg/png)"),!1)},quillImgSuccess:function(e,t){var r=this.$refs.quillEditor.quill;if(200==e.code){var o=r.getSelection().index1;r.insertEmbed(o,"image",e.url),r.setSelection(o+1)}else this.$message.error("图片插入失败")},uploadError:function(){this.$message.error("图片插入失败")},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(i["a"])(e.form).then((function(t){200===t.code?(e.msgSuccess("新增砍价成功"),e.open=!1,e.$emit("closeBargain",!1)):e.msgError(t.msg)}))}))}}},d=p,b=(r("c819"),r("2877")),g=Object(b["a"])(d,o,a,!1,null,"3374e75a",null);t["default"]=g.exports},3098:function(e,t,r){"use strict";r.d(t,"g",(function(){return l})),r.d(t,"f",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"h",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return f}));var o=r("b775"),a=r("c38a");function l(e){return Object(o["a"])({url:"/store/course/list",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/store/course/"+Object(a["d"])(e),method:"get"})}function i(e){return Object(o["a"])({url:"/store/course",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/store/course",method:"put",data:e})}function c(e){return Object(o["a"])({url:"/store/course/"+e,method:"delete"})}function u(e){return Object(o["a"])({url:"/store/course/export",method:"get",params:e})}function m(e){return Object(o["a"])({url:"/store/course/changeStatusOff/"+e,method:"get"})}function f(e){return Object(o["a"])({url:"/store/course/changeStatusOn/"+e,method:"get"})}},3962:function(e,t,r){},c819:function(e,t,r){"use strict";var o=r("3962"),a=r.n(o);a.a},cd6b:function(e,t,r){"use strict";r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return n})),r.d(t,"f",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return c}));var o=r("b775");function a(e){return Object(o["a"])({url:"/store/bargain/list",method:"get",params:e})}function l(e){return Object(o["a"])({url:"/store/bargain/"+e,method:"get"})}function n(e){return Object(o["a"])({url:"/store/bargain",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/store/bargain",method:"put",data:e})}function s(e){return Object(o["a"])({url:"/store/bargain/"+e,method:"delete"})}function c(e){return Object(o["a"])({url:"/store/bargain/export",method:"get",params:e})}}}]);